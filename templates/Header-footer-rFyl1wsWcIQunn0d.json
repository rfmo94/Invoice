{"name":"Header-footer","recipe":"chrome-pdf","engine":"handlebars","chrome":{"marginTop":"10mm","marginLeft":"5mm","height":"","format":"A4","marginRight":"5mm","landscape":false},"workspaceVersion":11,"modificationDate":"2020-05-14T16:34:39.144Z","workspaceShortid":"BkEHf9MNG","workspaceId":"5df0855453d4ecbc340adedd","creationDate":"2020-05-12T13:02:46.813Z","data":{"shortid":"uhNT4Zm"},"inheritedReadPermissions":[],"inheritedEditPermissions":[],"_id":"rFyl1wsWcIQunn0d","shortid":"dm_U9Y0","pdfOperations":[],"content":"<style>\n.tabela {\n    background-color: yellow;\n}\n\n.main {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    width: 100%;\n    height: 100%;\n}\n\n.footer-logo {\n    margin-top: 5px;\n    border-radius: 10px;\n    text-align: right;\n}\n\n.logo-resize {\n  max-width:50%;\n  max-height:50%;\n}\n\n.footer-content {\n    display: flex;\n    justify-content: space-between;\n    border-top: 1px solid #000;\n}\n\n.footer-page-numbers {\n    font-size: 10px;\n    margin-top: 5px;\n}\n\n.footer-edited {\n    font-size: 10px;\n    color: black;\n    padding-top: 8px;\n} \n</style>\n<section>\n <body>     \n        {{#each $pdf.pages}}\n            {{#if @index}}\n                <div style=\"page-break-before: always;\"></div>\n            {{/if}}\n           <main class=\"main\">\n                {{#ifContentPage @this}}\n                    <table class=\"tabela\">\n<!--                          <tr>\n                                <td class=\"title\">\n                                    <img src=\"{#asset ./images/newhotel-pms.png @encoding=dataURI}\" style=\"width:100%; max-width:250px;\" />\n                                   <img class=\"header-logo-resize\" src=\"{#asset ./images/newhotel-pms.png @encoding=dataURI}\"/>\n                                </td>\n                                <td>\n                                    Invoice: \n                                    <br> Created: {{now}}\n                                </td>\n                            </tr>\n-->\n                        <th rowspan=4><img src=\"{#asset ./images/newhotel-pms.png @encoding=dataURI}\" align=\"left\" style=\"width:100%; max-width:250px;\" /></th>\n                        <tr>\n                        <td align=\"right\">Original</td>\n                        </tr>\n                        <tr>\n                        <td align=\"right\">Invoice:{{number}}</td>\n                        </tr>\n                        <tr>\n                        <td align=\"right\">Created: {{date_created}}</td>\n                        </tr>\n                    </table>\n                    <footer class=\"footer\">\n                        <section class=\"footer-content\">\n                            <section>\n                            <div class=\"footer-page-numbers\">\n                                <span>Page {{getPageInfo ../$pdf.pages @index}}</span>\n                            </div>\n                                <div class=\"footer-edited\"><strong>Edited by:</strong><a href=\"rfmo94@gmail.com\">Rui Oliveira</a></div>\n                            </section>\n                            <section class=\"footer-logo\">\n                                <img class=\"logo-resize\" src=\"{#asset ./images/newhotel-pms.png @encoding=dataURI}\"/>\n                            </section>\n                        </section>\n                    </footer>                    \n                {{else}}\n                    <span>&nbsp;</span>\n                {{/ifContentPage}}\n            </main> \n        {{/each}}\n    </body>  \n    </section>","helpers":"function ifContentPage (page, options) {\r\n    const ignoreHeaderFooter = page.items.find((p) => p.ignoreHeaderFooter === true) != null\r\n    \r\n    if (!ignoreHeaderFooter) {\r\n        return options.fn(this)\r\n    } else {\r\n        return options.inverse(this)\r\n    }\r\n}\r\n\r\nfunction getPageNumber (pages, pageIndex) {\r\n    if (!pages || pageIndex == null) {\r\n        return ''\r\n    }\r\n    \r\n    const pagesToIgnore = pages.reduce((acu, page) => {\r\n        const shouldIgnore = page.items.find((p) => p.ignorePageInCount === true) != null\r\n        \r\n        if (shouldIgnore) {\r\n            acu.push(page)\r\n        }\r\n        \r\n        return acu\r\n    }, []).length\r\n    \r\n    const pageNumber = pageIndex + 1\r\n    \r\n    return pageNumber - pagesToIgnore\r\n}\r\n\r\nfunction getTotalPages (pages) {\r\n    if (!pages) {\r\n        return ''\r\n    }\r\n    \r\n    const pagesToIgnore = pages.reduce((acu, page) => {\r\n        const shouldIgnore = page.items.find((p) => p.ignorePageInCount === true) != null\r\n        \r\n        if (shouldIgnore) {\r\n            acu.push(page)\r\n        }\r\n        \r\n        return acu\r\n    }, []).length\r\n    \r\n    return pages.length - pagesToIgnore\r\n}\r\n\r\nfunction now() {\r\n    return new Date().toLocaleDateString()\r\n}\r\n\r\nfunction getPageInfo (pages, index) {\r\n    const group = pages[index].group\r\n    \r\n    let gstart = index\r\n    while (gstart - 1 > -1 && pages[gstart - 1].group === group) {\r\n        gstart--\r\n    }\r\n\r\n    let gend = index\r\n    while ((gend + 1 < pages.length) && pages[gend + 1].group === group) {\r\n        gend++\r\n    }\r\n           \r\n    return (index - gstart + 1) + ' of ' + (gend - gstart + 1)\r\n}","folder":{"shortid":"ZIaf5Mm"}}